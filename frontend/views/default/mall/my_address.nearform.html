<div class="eject_con">
  <div class="add">
    <div id="warning"></div>
    <form method="post" action="{$action}" id="address_form" target="iframe">
      <ul>
        <li class="B_Consignee">
          <h3>收货人(祝?): </h3>
          <p>
            <input type="text" class="text width_normal I_Consignee consignee" name="consignee" value="{$address.consignee|escape}"/>
            <label class="field_message"><span class="field_notice">{$lang.consignee_desc}，没有就从下面选择</span></label>
          </p>
		  <p style="line-height: 24px;">
			  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<!--{foreach from=$defaultconsignee item=record key=key}-->
			<label style="color:#b4b4b4;">
			<input type="radio" class="default-consi"  style="color:#b4b4b4;margin-right:5px;margin-left:10px;" name="defaultconsignee" value="{$record['real_name']|escape}" />
			{$record.real_name|escape}</label>
			<!--{/foreach}-->
		  </p>
		  <div class="I_Consignee_list"></div>
        </li>
        <li>
          <h3>{$lang.region}: </h3>
          <p>
          <div id="region">
            <input type="hidden" name="region_id" value="{$address.region_id}" id="region_id" class="mls_id" />
            <input type="hidden" name="region_name" value="{$address.region_name|escape}" class="mls_names" />
            <!-- {if $address.region_id} --> 
            <span>{$address.region_name|escape}</span>
            <input type="button" value="{$lang.edit}" class="edit_region" />
            <select style="display:none" onchange="hide_error();">
              <option>{$lang.select_pls}</option>
				{html_options options=$regions}      
            </select>
            <!-- {else} -->
            <select onchange="hide_error();">
              <option>{$lang.select_pls}</option>
				{html_options options=$regions}        
            </select>
            <!-- {/if} --> 
            <b class="field_message" style="font-weight:normal;">
            <label class="field_notice"></label>
            </b> </div>
          </p>
        </li>
        <li>
          <h3>{$lang.address}: </h3>
          <p>
            <input type="text" class="text width_normal I_Address address" name="address" value="{$address.address|escape}"/>
            <label class="field_message"><span class="field_notice">{$lang.address_desc},没有就从下面选择</span></label>
          </p>
		  <p style="line-height: 24px;">
			  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			 
			<label style="color:#b4b4b4;">
			<input type="radio" class="default-address"  style="color:#b4b4b4;margin-right:5px;margin-left:10px;"
			 name="defaultaddress" value="自提" />自提
			 </label>
		 
		  			
		  </p>
        </li>
		<li>
		  <h3>落款(赠送人): </h3>
		  <p>
		    <input type="text" class="text width_normal signature" name="signature" value="{$address.signature|escape}"/>
			<label class="field_message" ><span class="field_notice">签名落款，多个用“逗号”隔开。没有就从下面选择</span></label>
		  </p>
		  <p style="line-height: 24px;">
			  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<!--{foreach from=$defaultsignature item=record key=key}-->
			<label style="color:#b4b4b4;">
			<input type="radio" class="default-sign"  style="color:#b4b4b4;margin-right:5px;margin-left:10px;" name="defaultsign" value="{$record['real_name']|escape}" />
			{$record.real_name|escape}</label>
			<!--{/foreach}-->
			
		  </p>
		</li>
		<li>
		  <h3>订货人(结款): </h3>
		  <p>
		    <input type="text" class="text width_normal subscriber" name="subscriber" value="{$address.subscriber|escape}"/>
			<label class="field_message" ><span class="field_notice">订单付款人格式（wx~微信名），没有就从下面选择</span></label>
		  </p>
		  <p style="line-height: 24px;">
			  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<!--{foreach from=$defaultUsers item=record key=key}-->
			<label style="color:#b4b4b4;">
			<input type="radio" class="default-user"  style="color:#b4b4b4;margin-right:5px;margin-left:10px;" name="defaultUser" value="{$record['real_name']|escape}" />
			{$record.real_name|escape}</label>
			<!--{/foreach}-->
		  </p>
		</li>
        <li style="display: none;">
          <h3>{$lang.zipcode}: </h3>
          <p>
            <input  type="text" class="text width_normal" name="zipcode" name="zipcode" value="{$address.zipcode|escape}" />
            <label class="field_message"><span class="field_notice"></span></label>
          </p>
        </li>
        <li style="display: none;">
          <h3>{$lang.phone_tel}:</h3>
          <p>
            <input type="text" class="text width_normal"  name="phone_tel" value="{$address.phone_tel}"/>
          </p>
        </li>
        <li>
          <h3>{$lang.phone_mob}:</h3>
          <p>
            <input type="text" class="text width_normal" name="phone_mob" value="{$address.phone_mob}"/>
            <label class="field_message"><span class="field_notice">{$lang.phone_mob}</span></label>
          </p>
        </li>

        <li>
          <h3>祝福语:</h3>
          <p>
            <textarea id="remark_input" class="text width_normal content"  class="text" name="content" 
            value="{$address.content|escape}"   style="width:270px;height:90px;" placeholder="如：”开业大吉，生意兴隆“">{$address.content|escape}</textarea>
            <label class="field_message">
				<span class="field_notice">无，就从下面选择</span>
			</label>
          </p>
		  <p style="line-height: 24px;">
			  &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
			<!--{foreach from=$contents item=record key=key}-->
			<label style="color:#b4b4b4;">
			<input type="radio" class="default-content"  style="color:#b4b4b4;margin-right:5px;margin-left:10px;" name="defaultcontent" value="{$record['content']|escape}" />
			{$record.content|escape}</label>
			<!--{/foreach}-->
		  </p>
        </li>     
		<li>
          <h3>配送人:</h3>
          <p>
           <select class="querySelect I_Con" name="book_id">
				<option value="">--选择配送人--</option>
				{html_options options=$deliveryUsers selected=$address.book_id}
           </select>
          </p>
		  <h3>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;配送费:</h3>
		  <p>
		    <input type="text" class="text width_normal" name="book_amount" value="{$address.book_amount}"/>
		    <label class="field_message"><span class="field_notice">默认10元</span></label>
		  </p>
		</li>  
		     

        <li>
          <h3>设为默认:</h3>
          <p style="line-height: 24px;">
            <label>
              <input type="radio"  style="margin-right:5px;" name="defaddr" value="0" {if $address.defaddr eq 0}checked="checked"{/if} />
              {$lang.no} </label>
            <label>
              <input type="radio" name="defaddr" value="1" {if $address.defaddr eq 1}checked="checked"{/if} />
              {$lang.yes} </label>
          </p>
        </li>
      </ul>
      <div class="submit">
      	<input type="hidden" name="redirect" value="{$redirect}" />
		<input type="hidden" name="from" value="{$from}" />
        <input type="submit" class="btn" value="{$lang.submit}" />
      </div>
    </form>
  </div>
</div>
<script type="text/javascript">
  var defaultUser = "{$defaultUser['real_name']}";
$(function(){
    regionInit("region");
    $('.default-user').click(function(){
        $('.subscriber').val($(this).val())
    })
	$('.default-sign').click(function(){
	    $('.signature').val($(this).val())
	})
	$('.default-consi').click(function(){
	    $('.consignee').val($(this).val())
	})
	$('.default-content').click(function(){
	    $('.content').val($(this).val())
	})
	$('.default-address').click(function(){
	    $('.address').val($(this).val())
	})
	$('.B_Consignee .I_Consignee').change(function(){
 
		$.getJSON("{url route='my_address/search'}", { 'keyword' : $('.I_Consignee').val()}, function(data) {
			html = '';
			if(data.code == 0 && data.count>0) {
				$('.I_Address').val(data.data[0].address);
				$.each(data.data,function(i, item){	
					html += '<li style="padding: 10px 0 0;color:#FF8800;">[地址]('+(i+1)+'): <span>'+item.address+'</span></li>';
				});
				$('.I_Consignee_list').html("<ul>"+html+"</ul>");
			}else{
				$('.I_Consignee_list').html("");
			}
		});
	}); 
});
</script>